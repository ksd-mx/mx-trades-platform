```mermaid
graph TD
    subgraph "Client Layer"
        UI[Web/Mobile UI]
        WS[WebSocket Gateway]
        REST[REST Gateway]
    end

    subgraph "Event Streaming Layer"
        NATS[NATS JetStream]
        style NATS fill:#f9f,stroke:#333,stroke-width:2px
    end

    subgraph "Core Services"
        OrderService[Order Service]
        MatchingEngine[Matching Engine]
        MarketData[Market Data Service]
        UserService[User Service]
        PositionService[Position Service]
        RiskService[Risk Service]
    end

    subgraph "AI Layer"
        AIOrchestrator[AI Orchestrator]
        StrategyEngine[Strategy Engine]
        MLPipeline[ML Pipeline]
    end

    subgraph "Blockchain Layer"
        ChainService[Chain Service]
        SmartContracts[Smart Contracts]
        LiquidityPools[Liquidity Pools]
    end

    subgraph "Data Layer"
        InfluxDB[(InfluxDB)]
        MongoDB[(MongoDB)]
        Redis[(Redis)]
    end

    UI --> WS
    UI --> REST
    WS --> NATS
    REST --> NATS

    NATS --> OrderService
    NATS --> MatchingEngine
    NATS --> MarketData
    NATS --> UserService
    NATS --> PositionService
    NATS --> RiskService
    NATS --> AIOrchestrator
    NATS --> ChainService

    OrderService --> InfluxDB
    MatchingEngine --> InfluxDB
    MarketData --> InfluxDB
    UserService --> MongoDB
    PositionService --> MongoDB
    RiskService --> Redis

    AIOrchestrator --> StrategyEngine
    AIOrchestrator --> MLPipeline

    ChainService --> SmartContracts
    ChainService --> LiquidityPools
```